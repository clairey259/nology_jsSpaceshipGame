"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _helperPluginUtils = require("@babel/helper-plugin-utils");

function removePlugin(plugins, name) {
  var indices = [];
  plugins.forEach(function (plugin, i) {
    var n = Array.isArray(plugin) ? plugin[0] : plugin;

    if (n === name) {
      indices.unshift(i);
    }
  });

  for (var _i = 0, _indices = indices; _i < _indices.length; _i++) {
    var i = _indices[_i];
    plugins.splice(i, 1);
  }
}

var _default = (0, _helperPluginUtils.declare)(function (api, _ref) {
  var isTSX = _ref.isTSX,
      disallowAmbiguousJSXLike = _ref.disallowAmbiguousJSXLike;
  api.assertVersion(7);
  return {
    name: "syntax-typescript",
    manipulateOptions: function manipulateOptions(opts, parserOpts) {
      var plugins = parserOpts.plugins;
      removePlugin(plugins, "flow");
      removePlugin(plugins, "jsx");
      plugins.push(["typescript", {
        disallowAmbiguousJSXLike: disallowAmbiguousJSXLike
      }], "classProperties");
      {
        plugins.push("objectRestSpread");
      }

      if (isTSX) {
        plugins.push("jsx");
      }
    }
  };
});

exports["default"] = _default;